 <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>WorkFlow Form Builder - Team 1</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">




     <link href="assets/css/lib/bootstrap.min.css" rel="stylesheet">

    <link href="assets/css/custom.css" rel="stylesheet">
    <link href="assets/css/lib/bootstrap-responsive.min.css" rel="stylesheet">


    <!--[if lt IE 9]>
    <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->


    <script type="text/javascript" src="http://www.parsecdn.com/js/parse-1.4.2.min.js"></script>
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  </head>

  <body>

<!--  Navigation -->
    <nav class="navbar navbar-default navbar-fixed-top topnav" role="navigation">
        <div class="container topnav">
<!--             Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand topnav" href="main.html"><b>Workflow</b></a>
            </div>
<!--             Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">

                    <li>
                        <a href="main.html"><b>Main</b></a>
                    </li>
                
                    <li>
                        <a href = "javascript:deleteLocalStorage()"><b>LogOut</b></a>
                    </li>
                </ul>
            </div>
<!--             /.navbar-collapse -->
        </div>
<!--         /.container -->
    </nav>
<br><br>

<!-- Select Basic -->
    <div class="control-group" align="center">
        <label class="control-label" for="selectWorkflow">Select Workflow</label>
        <div class="controls">
            <select id="selectWorkflow" name="selectbasic-0" class="input-xlarge">
            </select>
        </div>
    </div>
    <div align="center">
        <button id="button2" class="btn btn-info" onclick="getWorkFlowList()"> Get Workflow List </button>
    </div>

    <br>

    <div align="center">
      <button id="button" class="btn btn-success" onclick="submitFunction()">Publish</button>
    </div>

    <br>

    <div class="container">
      <div class="row clearfix">
       <!--  Building Form. -->
        <div class="span6">
          <div class="clearfix">
            <h2>WorkFlow Form</h2>
            <hr>
            <div id="build">
              <form id="target" class="form-horizontal">
              </form>
            </div>
          </div>
        </div>
<!--         / Building Form.
 -->
<!--         Components -->
        <div class="span6">
          <h2>Form Components</h2>
          <hr>
          <div class="tabbable">
            <ul class="nav nav-tabs" id="formtabs">
       <!--        Tab nav -->
            </ul>
            <form class="form-horizontal" id="components">
              <fieldset>
                <div class="tab-content">
                  <!-- Tabs of snippets go here -->
                </div>
              </fieldset>
            </form>
          </div>
        </div>
        <!-- / Components -->

      </div>



      <script type="text/javascript">


        function deleteLocalStorage() {
          localStorage.removeItem('userID');
          window.location = "home.html";
        }



        function submitFunction() {
            if (document.getElementById("selectWorkflow").value == ""){
                alert("Please select workflow for form!");
                return;
            }
            Parse.initialize("CRXkf1yR9J0nmuceGyELfcr8JXCNRc5fRHZEmpP9", "ZL0t301476ATdbK2mN33zpIL5d8lpbfGIRYRFypb");
            var FormObject = Parse.Object.extend("WorkFlowForm");
            var formObject = new FormObject();
            formObject.save({FormCode: document.getElementById("render").value, Workflow: document.getElementById("selectWorkflow").value , Name: document.getElementById("formName").innerHTML }).then(function(object) {
                alert("Form Published");
            });
        }

        function getWorkFlowList() {
            Parse.initialize("CRXkf1yR9J0nmuceGyELfcr8JXCNRc5fRHZEmpP9", "ZL0t301476ATdbK2mN33zpIL5d8lpbfGIRYRFypb");

            var workflows = Parse.Object.extend("Workflow");
            var query = new Parse.Query(workflows);
            query.find({
                success: function(results) {
                    //alert("Successfully retrieved " +  results.length  + " Objects");
                    // Do something with the returned Parse.Object values
                    for (i=0; i < results.length; i++){
                        document.getElementById("selectWorkflow").innerHTML += "\n<option>" + results[i].get('Name') + "</option>";
                    }
                },
                error: function(error) {
                    alert("Error: " + error.code + " " + error.message);
                }
            });
        }
      </script>


      <div class="row clearfix">
        <div class="span12">
          <hr>
          By CS480 Workflow Forms Team 1
        </div>
      </div>

    </div> 

    <script data-main="assets/js/main-built.js"
src="assets/js/lib/require.js" ></script>
    <!-- /container
    jQuery -->
    <script src="js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="js/bootstrap.min.js"></script>


  </body>
</html> 